<article class="card">
  <div class="content-body">
    <h5 class="card-title mb-4">Change Password</h5>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="mb-3">
        <label class="form-label">Current Password</label>
        <div class="input-group">
          <input [type]="passwordVisible.current ? 'text' : 'password'" class="form-control"
            formControlName="currentPassword" placeholder="Current password">
          <span class="input-group-text" (click)="toggleVisibility('current')" style="cursor: pointer;">
            <i [class]="passwordVisible.current ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </span>
        </div>
        <small *ngIf="f.currentPassword.invalid && isSubmitted" class="text-danger">Current password is required</small>
      </div>
      <div class="mb-3">
        <label class="form-label">New Password</label>
        <div class="input-group">
          <input [type]="passwordVisible.new ? 'text' : 'password'" class="form-control"
            formControlName="newPassword" placeholder="New password (min 6 characters)">
          <span class="input-group-text" (click)="toggleVisibility('new')" style="cursor: pointer;">
            <i [class]="passwordVisible.new ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </span>
        </div>
        <small *ngIf="f.newPassword.invalid && isSubmitted" class="text-danger">
          Required, min 6 characters
        </small>
      </div>
      <div class="mb-3">
        <label class="form-label">Confirm New Password</label>
        <div class="input-group">
          <input [type]="passwordVisible.confirm ? 'text' : 'password'" class="form-control"
            formControlName="confirmPassword" placeholder="Confirm new password">
          <span class="input-group-text" (click)="toggleVisibility('confirm')" style="cursor: pointer;">
            <i [class]="passwordVisible.confirm ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </span>
        </div>
        <small *ngIf="form.errors?.mismatch && isSubmitted" class="text-danger">Passwords do not match</small>
      </div>
      <button class="btn btn-warning" type="submit" [disabled]="loading">
        {{ loading ? 'Updating...' : 'Change Password' }}
      </button>
    </form>
  </div>
</article>
