<article class="card">
  <div class="content-body">
    <h5 class="card-title mb-4">My Orders</h5>

    <div class="text-center py-5" *ngIf="loading">
      <div class="spinner-border text-warning" role="status"></div>
      <p class="mt-2 text-muted">Loading orders...</p>
    </div>

    <div class="alert alert-warning" *ngIf="!loading && errorMessage">
      {{ errorMessage }}
      <button class="btn btn-sm btn-outline-warning ms-2" (click)="loadOrders()">Retry</button>
    </div>

    <div *ngIf="!loading && !errorMessage && !orders.length" class="text-center py-5 text-muted">
      <i class="fa-solid fa-box-open fa-3x mb-3"></i>
      <p>You have no orders yet.</p>
      <a routerLink="/products" class="btn btn-warning">Start Shopping</a>
    </div>

    <div class="list-group" *ngIf="!loading && orders.length">
      <div class="list-group-item list-group-item-action" *ngFor="let order of orders">
        <div class="d-flex w-100 justify-content-between align-items-start flex-wrap">
          <div>
            <h6 class="mb-1">Order #{{ order._id || order.id }}</h6>
            <p class="mb-1 text-muted small" *ngIf="order.createdAt || order.date">
              <i class="fa-solid fa-calendar me-1"></i>{{ (order.createdAt || order.date) | date:'medium' }}
            </p>
            <span class="badge bg-{{ getStatusClass(order.status) }}" *ngIf="order.status">
              {{ order.status }}
            </span>
          </div>
          <div class="text-end">
            <strong class="text-dark" *ngIf="order.totalOrderPrice || order.total">${{ order.totalOrderPrice || order.total }}</strong>
            <p class="mb-0 small text-muted" *ngIf="order.paymentMethod">{{ order.paymentMethod }}</p>
          </div>
        </div>
        <div class="mt-2" *ngIf="order.items && order.items.length">
          <small class="text-muted">{{ order.items.length }} item(s)</small>
        </div>
      </div>
    </div>
  </div>
</article>
